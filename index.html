<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Catálogo de Filmes - Fase 1: Cadastro Manual (DOM Básico)</title>

    <link rel="stylesheet" href="style.css">

</head>
<body>
   
    <h1>Catálogo de Filmes</h1>

    <form id="cadastro-filme">
        <h2>Adicionar Novo Filme</h2>
        <div>
<label for="titulo">Título do Filme:</label>
<input type="text" id="titulo" required>
        </div>

        <div>
<label for="sinopse">Sinopse</label>
<textarea id="sinopse" required></textarea>
        </div>

  <button type="submit">Adicionar Filme</button>
        </form>

        <hr>

        <h2>Minha Lista de Filmes</h2>

        <div id="Lista-filmes">
<p>Nenhum filme cadastrado ainda.</p>
        </div>

        <script>
// 1. ARMAZENAMENTO DE DADOS
// Array global que irá guardar todos os filmes como objetos.
// Ex: [{ titulo: 'Filme X', sinopse: 'Sinopse Y' }]
const catalogo = [];

// 2. captura de elementos do dom (document object model)
// capturamos os elementos html que vamos interagir, usando seus IDs.
const from = document. getElementById ('cadastro-filme');
const listafilmecontainer = documen.getElementById('lista-filmes');

// -----------------------------------------------------------------
// função de remoção
//------------------------------------------------------------------
/**
* remove um filme do array de dados e do elemento html na tela.
*@param  {number} indice - a posição  do filme no array 'catalogo'.
*@param {HTMLlement}elementoDOM - Oelemento <div> do filme a ser removido da tela.
    */
    function removerFilme(indice,elementoDOM) {
// A. REMOÇÃO DO ARRAY (lógica)
// splice(indice, 1) remove 1 elemento a partir da posição 'indice'.
// Isso atualiza o array 'catalogo'.
catalogo.splice(indice, 1);

// B. REMOÇÃO DO DOM (Visual)
// O método .remove() retira o elemento HTML da visualização do usuário.
elementoDOM.remove();

// Opcional: Atualiza a mensagem da lista se estiver vazia
if (catalogo.length === 0) {
    listafilmecontainer.innerHTML = '<p>Nenhum filme cadastrado ainda.</p>';
}

console.log(`Filme no índice ${indice} removido. Catálogo atualizado:`, catalogo);
}

//-----------------------------------------------------------------
// FUÇÃO DE RENDERIZAÇÃO
//-----------------------------------------------------------------
/**
 * Cria e exibe estrutura HTML de um filme na lista.
 * @param {Object} filme - O objeto {titulo, sinopse} do filme.
 * @param {number} indice - O índice atual do filme no array 'catalogo'.
 */
 function rederizarFilme(filme, indice) {
 // Remove a mensagem inicial se for o primeiro filme
 if (catalogo.length === 1) {
 listaFilmesContainer.innerHTML = '';
 }

 // A. CRIAÇÃO DE ELEMENTOS HTML (document.createElement)

 //Cria a <div> que será o contêiner de cada filme.
    const filmeDiv = document.createElement('div');
filmeDiv.classList.add('filme-item'); //Adiciona uma classe para estilização

// Cria o <h3> para o título e define seu texto.
const tituloH3 = document.createElement('h3');
tituloH3.textContent = filme.titulo;

// Cria o <p> para a sinopse e define seu texto.
const sinopseP = document.createElement('p');
sinopseP.textContent = filme.sinopse;

// Cria o botão de remoção.
const removerBotao = document.createElement('button');
removerBotao.textContent = 'Remover';
removerBotao.classList.add('btn-remover');

// B. DEFINIÇÃO DO EVENTO DE REMOÇÃO (addEventListener)
// Anexa a função 'removerFilme' ao clique do botão.
removerBotao.addEventListener('click', () => {
// Ao clicar, chamamos a função, passando o índice (posição) e a própria <div> (filmeDiv).
removerFilme(indice, filmeDiv)
});

// C.ANEXAR ELEMENTOS (appendChild)
//Monta a estrutura hierárquica:
// filmeDiv
//   |- tituloH3
//   |- sinipseP
//   |- removerBotao
filmeDiv.appendChild(tituloH3);
filmeDiv.appendChild(sinopseP);
filmeDiv.appendChild(removerBotao);

// D. INSERÇÃO NO DOM FINAL
// Adicinar o filme montado (filmeDiv) dentro do conteíner pricipal na página.
listafilmecontainer.appendChild(filmeDiv);
}

//----------------------------------------------------------------
// FUNÇÃO PRINCIPAL DE ADIÇÃO (Manipulador do Formulário)
//----------------------------------------------------------------
/**
* Lida com o envio do formulário, captura os dados e salva o filme.
* @param {Event} evento - O evento de 'submit' do formulário.
*/
function adicinarFilme(evento) {
// 3. Previne o recarregamento da página
// O comportamento padão de um formulário é recarregar a página. O preventDefault() impede isso. 
evento.preventDefault();

// 4. Captura os valores dos campos 
const tituloInput = document.getElementById('titulo');
const SinopseInput = document.getElementById('sinopse');

// Cria o objeto JavaScript com os dados
const novofilme = {
    titulo: tituloInput.value,
sinopse: SinopseInput. value
};

// 5. Armazena o filme no Array
// O método .push() adicina o novo objeto no final do array 'catalogo'.
catalogo.push(novofilme);

// 6. Renderiza na Tela
// Passamos o novo objeto e seu ídice (que é sempre o último, ou seja, tamanho - 1)
rederizarFilme(novofilme, catalogo.length - 1);

// 7. Limpa o formulário 
// O método .reset() limpa todos os campos do formulário para o próximo cadastro.
form.reset();
}


// 8. ESCUTANDO O EVENTO DO BOTÃO/FORMULÁRIO
// Anexamos a função 'adicionarFilme' ao evento de 'submit' do formulário.
form.addEventListener('submit', adicionarFilme);

console.log("JavaScript Carregado. Pronto para iniciar o catalogo!");
</script>

</body>
</html>